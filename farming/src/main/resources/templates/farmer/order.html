<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8">
    <title>购物车页面</title>

    <link th:href="@{~/farmer/css/zerogrid.css}" rel="stylesheet" media="all" type="text/css">
    <link th:href="@{~/farmer/css/style.css}" rel="stylesheet" media="all" type="text/css">
    <link th:href="@{~/farmer/css/menu.css}" rel="stylesheet" media="all" type="text/css">
   <link th:href="@{~/farmer/css/animate.css}" rel="stylesheet" media="all" type="text/css">
    <link th:href="@{~/farmer/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{~/farmer/owl-carousel/owl.carousel.css}" rel="stylesheet">
    <link rel="stylesheet" type="text/css" th:href="@{~/front/css/public.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{~/front/css/proList.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{~/front/css/mygxin.css}"/>
    <style>
        .container {
            border-bottom: 1px solid #999;
        }

        .headerimg {
            border-radius: 50%;
            text-align: center;
            margin-left: 20px;
        }

        .headerimg img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            vertical-align: middle;
        }

        .box {
            display: flex;
            padding: 20px 0;
        }

        .name {
            margin: 0 15px;
            font-size: 16px;
            color: #6864C3;
        }

        .time {
            float: right;
            margin: -25px 20px 0 0;
        }

        .comment {
            font-size: 16px;
        }
    </style>


    <script th:src="@{~/farmer/js/html5.js}"></script>
    <script th:src="@{~/farmer/js/css3-mediaqueries.js}"></script>



</head>
<body id="page-top" class="sub-page">
<div class="wrap-body">

    <header>
        <div class="wrap-header" >
            <div class="main-header">
                <div class="bg-overlay">
                    <div class="hero-content-wrapper">
                        <div class="hero-content">
                            <h4 class="h-alt hero-subheading wow fadeIn" data-wow-duration="2s" data-wow-delay=".7s">购物车列表</h4>
                            <h1 class="hero-lead wow fadeInLeft" data-wow-duration="1.5s">购物车</h1>
                        </div>
                    </div>
                </div>
            </div>

            <!---Top Menu--->
            <div id="cssmenu" >
                <ul>
                    <li class="has-sub"><a href="#" th:if="${session.judge!=null&&session.judge.getStatus()==1}"><span th:text="${session.judge.getName()}"></span></a>
                        <ul>
                            <li><a th:href="@{/farmer_manage/index.html}"><span>个人中心</span></a></li>
                            <li><a th:href="@{/user/loginout}"><span>退出</span></a></li>
                        </ul>
                    </li>

                    <li class="has-sub"><a href="#" th:if="${session.judge!=null&&session.judge.getStatus()==2}"><span th:text="${session.judge.getName()}"></span></a>
                        <ul>
                            <li><a th:href="@{/seller_manage/index.html}"><span>个人中心</span></a></li>
                            <li><a th:href="@{/user/loginout}"><span>退出</span></a></li>
                        </ul>
                    </li>

                    <li class="has-sub"><a href="#" th:if="${session.judge!=null&&session.judge.getStatus()==3}"><span th:text="${session.judge.getName()}"></span></a>
                       <input type="hidden" th:value="${session.judge.getId()}" id="jugeid">
                        <ul>
                            <li><a th:href="@{/professor_manage/index.html}"><span>个人中心</span></a></li>
                            <li><a th:href="@{/user/loginout}"><span>退出</span></a></li>
                        </ul>
                    </li>


                    <li class="has-sub"><a href="#" th:if="${session.judge}==null"><span >游客</span></a>
                        <ul >
                            <li><a th:href="@{/user/login}"><span>登入</span></a></li>
                            <li><a th:href="@{/user/register}"><span>注册</span></a></li>
                        </ul>
                    </li>
                    <li><a th:href="@{/article}"><span>文章</span></a></li>
                    <li><a th:href="@{/product}"><span>农产品</span></a></li>
                    <li><a th:href="@{/cart}"><span>购物车</span></a></li>
                    <li class="last"><a th:href="@{/contact}"><span>联系我们</span></a></li>
                </ul>
            </div>





        </div>
    </header>

    <section id="page-content">
        <div class="zerogrid">
            <div style="height: 10px"></div>

            <div class="order cart mt"><!-----------------site------------------->
                <div class="site"><p class="wrapper clearfix"><span class="fl">订单确认</span>
                    <img class="top" th:src="@{~/front/img/temp/cartTop02.png}"></p>
                </div><!-----------------orderCon------------------->
                <div class="orderCon wrapper clearfix">
                    <div class="orderL fl">
                        <!--------h3---------------->
                        <h3>收件信息<a href="#" class="fr">新增地址</a></h3>

                        <!--------addres---------------->
                        <div class="addres clearfix" th:if="${session.judge!=null}">
                            <div class="addre fl on">
                                <div class="tit clearfix"><p class="fl" th:text="${session.judge.getName()}"> <span class="default">[默认地址]</span></p>
                                    <p class="fr"><a href="#">删除</a><span>|</span>
                                        <a href="#" class="edit">编辑</a></p>
                                </div>
                                <div class="addCon">
                                    <p th:text="${session.judge.getAddress()}"></p>
                                    <p th:text="${session.judge.getTelephone()}"></p></div>
                            </div>
                            <div class="addre fl">
                                <div class="tit clearfix"><p class="fl">张三2</p>
                                    <p class="fr"><a href="#" class="setDefault">设为默认</a><span>|</span><a
                                            href="#">删除</a><span>|</span><a href="#" class="edit">编辑</a></p></div>
                                <div class="addCon"><p>河北省&nbsp;唐山市&nbsp;</p>
                                    <p>15732570937</p></div>
                            </div>
                            <div class="addre fl">
                                <div class="tit clearfix"><p class="fl">张三3</p>
                                    <p class="fr"><a href="#" class="setDefault">设为默认</a><span>|</span><a
                                            href="#">删除</a><span>|</span><a href="#" class="edit">编辑</a></p></div>
                                <div class="addCon"><p>河北省&nbsp;唐山市&nbsp;</p>
                                    <p>15732570937</p></div>
                            </div>
                        </div>



                        <div class="addres clearfix" th:if="${session.judge==null}">
                            <div class="addre fl on">
                                <div class="tit clearfix"><p class="fl"> <span class="default">[默认地址]</span></p>
                                    <p class="fr"><a href="#">删除</a><span>|</span><a href="#" class="edit">编辑</a></p></div>
                                <div class="addCon"><p>河北省&nbsp;唐山市&nbsp;路北区&nbsp;大学生公寓村</p>
                                    <p>15732570937</p></div>
                            </div>
                            <div class="addre fl">
                                <div class="tit clearfix"><p class="fl">张三2</p>
                                    <p class="fr"><a href="#" class="setDefault">设为默认</a><span>|</span><a
                                            href="#">删除</a><span>|</span><a href="#" class="edit">编辑</a></p></div>
                                <div class="addCon"><p>河北省&nbsp;唐山市&nbsp;路北区&nbsp;大学生公寓村</p>
                                    <p>15732570937</p></div>
                            </div>
                            <div class="addre fl">
                                <div class="tit clearfix"><p class="fl">张三3</p>
                                    <p class="fr"><a href="#" class="setDefault">设为默认</a><span>|</span><a
                                            href="#">删除</a><span>|</span><a href="#" class="edit">编辑</a></p></div>
                                <div class="addCon"><p>河北省&nbsp;唐山市&nbsp;路北区&nbsp;大学生公寓村</p>
                                    <p>15732570937</p></div>
                            </div>
                        </div>


                        <h3>支付方式</h3>
                        <!--------way---------------->
                        <div class="way clearfix">
                            <img class="on" th:src="@{~/front/img/temp/way01.jpg}">
                            <img th:src="@{~/front/img/temp/way02.jpg}">
                            <img th:src="@{~/front/img/temp/way03.jpg}">
                            <img th:src="@{~/front/img/temp/way04.jpg}">
                        </div>
                        <h3>选择快递</h3><!--------dis---------------->
                        <div class="dis clearfix"><span class="on">顺风快递</span><span>百世汇通</span><span>圆通快递</span><span>中通快递</span>
                        </div>
                    </div>



                    <div class="orderR fr" >
                        <div class="msg">
                            <h3>订单内容<a th:href="@{/cart}" class="fr">返回购物车</a></h3>

                            <ul class="clearfix orderall"  th:each="cart:${session.cartjs}">
                                <input type="hidden" th:value="${cart.getProduct_id()}" class="product_id"  id="product_id">
                                <li class="fl"><img th:src="@{/farmer/images/{path}(path=${cart.getProduct_image()})}" style="width: 80px;height: 70px"></li>
                                <li class="fl ziji" style="margin-left: 30px;margin-top: 10px">
                                    <p th:text="${cart.getProduct_name()}"></p>
                                    <span>商品分类:</span>
                                    <span th:text="${cart.getProduct_classification()}"></span>
                                    <p></p>
                                    数量：<span class="number">[[${cart.getProduct_num()}]]</span></li>
                                <li class="fr">￥[[${cart.getProduct_sumprice()}]]0</li>
                            </ul>

                        </div><!--------tips---------------->
                        <div class="tips">
                            <p>
                                <span class="fl">商品金额：</span>
                                <span class="fr">￥<span th:text="${session.cartjs.get(0).getSumprice()}"></span>0</span>
                            </p>
                            <p>
                                <span class="fl">优惠金额：</span>
                                <span class="fr">￥0.00</span>
                            </p>
                            <p><span class="fl">运费：</span>
                                <span class="fr">免运费</span>
                            </p>
                        </div>
                        <div class="count tips">
                            <p><span class="fl">合计：</span>
                                <span class="fr">￥<span th:text="${session.cartjs.get(0).getSumprice()}"></span>0</span>
                            </p>
                        </div>
                         <a href="javascript:void(0);" onclick="zhifu();" class="pay">去支付</a>
                    </div>
                </div>
            </div><!--编辑弹框--><!--遮罩-->
            <div class="mask"></div>
            <div class="adddz editAddre">
                <form action="#" method="get"><input type="text" placeholder="姓名" class="on"/><input type="text" placeholder="手机号"/>
                    <div class="city"><select name="">
                        <option value="省份/自治区">省份/自治区</option>
                    </select><select>
                        <option value="城市/地区">城市/地区</option>
                    </select><select>
                        <option value="区/县">区/县</option>
                    </select><select>
                        <option value="配送区域">配送区域</option>
                    </select></div>
                    <textarea name="" rows="" cols="" placeholder="详细地址"></textarea><input type="text" placeholder="邮政编码"/>
                    <div class="bc"><input type="button" value="保存"/><input type="button" value="取消"/></div>
                </form>
            </div>
            <div style="height: 200px"></div>
        </div>


    </section>




    <script th:src="@{~/farmer/js/jquery-3.1.1.min.js}"></script>
    <script th:src="@{~/farmer/js/menu.js}"></script>
    <script th:src="@{~/farmer/js/jquery.localScroll.min.js}"></script>
    <script th:src="@{~/farmer/js/jquery.scrollTo.min.js}"></script>
    <script th:src="@{~/farmer/js/SmoothScroll.js}"></script>
    <script th:src="@{~/farmer/js/wow.min.js}"></script>
    <script th:src="@{~/farmer/js/main.js}"></script>
<!--    <script th:src="@{~/front/js/jquery-1.12.4.min.js}" type="text/javascript" charset="utf-8"></script>-->
    <script th:src="@{~/front/js/public.js}" type="text/javascript" charset="utf-8"></script>
    <script th:src="@{~/front/js/pro.js}" type="text/javascript" charset="utf-8"></script>
    <script th:src="@{~/front/js/user.js}" type="text/javascript" charset="utf-8"></script>

</div>


<script>
    var obj=Object.create(null)
    function zhifu() {
        var id = $("#jugeid").val();

        $(".orderall").each(function () {
            /*console.log(this);*/
            var product_id=$(this).children('.product_id').val();
            var number=$(this).children('.ziji').children('.number').text();

            obj[product_id]=number;

        });
       /* console.log(obj)*/

        $.ajax({
            url: "/zhifu",
            type: "POST",
            data:{
                "id":id,
                "orders":JSON.stringify(obj)

            },
            success: function (data) {
                /*alert(data);*/
                window.location.href="/ok";
            }
        })



    }

</script>


</body>

</html>